<script>
    var namaBuah = ['Apel', 'Anggur', 'Jeruk']
    var qtyBuah = []
    var stokBuah = [5, 7, 8]
    var hrgBuah = [10000, 15000, 20000]
    var welcome
    var kondisi   
    function listBuah(x) {
        for(i=0;i<namaBuah.length;i++){
            x += (`${i+1}. ${namaBuah[i]} | stok ${stokBuah[i]} | Rp ${hrgBuah[i]}/kg\n`)
        }
        alert(x)
    }

    do { // Loop welcomeeeeeeeee
        welcome = prompt('Selamat datang!\n1. Masuk\n2. Keluar')
        if (!(welcome==2 || welcome==1)) {
             kondisi = true
             alert('ERROR! Perhatikan input anda')
        }else if(welcome==2) {
            break
        }else {
            var kondisiMenuUtama
            do { // Loop Menu
                var menuUtama = parseInt(prompt('What do you want to do?\n'
                +'1. Menampilkan daftar buah\n2. Menambah buah\n'
                +'3. Menghapus buah\n4. Membeli buah'))
                if(!(menuUtama <=4 && menuUtama>=1)) { // jika input menuUtama selain 1,2,3,4
                    kondisi = true
                    alert('ERROR! Perhatikan input anda')
                }else if (menuUtama == 1){ // Input menuUtama 1. Menampilkan daftar buah
                    var output = ''
                    listBuah(output)
                    kondisiMenuUtama = confirm('Kembali ke menu utama?')
                }else if(menuUtama == 2){ // Input menuUtama 2. Menambah buah
                    var inputBuah = prompt('Masukkan nama buah')
                    namaBuah.push(inputBuah)
                    var inputStok = prompt('Masukkan jumlah stok')
                    stokBuah.push(inputStok)
                    var inputHarga = prompt('Masukkan jumlah harga satuan')
                    hrgBuah.push(inputHarga)
                    var output = ''
                    listBuah(output)
                    kondisiMenuUtama = confirm('Kembali ke menu utama?')
                }else if(menuUtama == 3){ // Input menuUtama 3. Menghapus buah
                    var output1 = ''
                    for(i=0;i<namaBuah.length;i++){
                        output1 += (`${i+1}. ${namaBuah[i]}\n`)
                    }
                    var hapus = parseInt(prompt('Pilih buah yang dihapus\n' + output1))
                    namaBuah.splice(hapus-1,1) // CARI CARA UTK HAPUS PAKE LOOP
                    stokBuah.splice(hapus-1,1)
                    hrgBuah.splice(hapus-1,1)
                    alert('Berhasil hapus pilihan: ' + hapus)
                    // belom ada proteksinya WOYYYY
                    var output2 = ''
                    listBuah(output2)
                    kondisiMenuUtama = confirm('Kembali ke menu utama?')
                }else if(menuUtama == 4){ // Input menuUtama 4. Membeli buah
                    for(i=0;i<namaBuah.length;i++){ // For loop utk auto delete buah saat stok 0
                        if(stokBuah[i]==0){
                            alert('ALERT! Buah ' + namaBuah[i] + ' dihapus dari daftar karena stok habis')
                            namaBuah.splice(i,1) // CARI CARA UTK HAPUS PAKE LOOP
                            stokBuah.splice(i,1)
                            hrgBuah.splice(i,1)
                        }
                    }
                    // Pas belanja ada menu tampilkan cart, jd bisa pilih belanja buah apa aja
                    for(i=0;i<namaBuah.length;i++){ // For loop utk prompt qtyBuah pake array
                        do {
                            qtyBuah[i] = parseInt(prompt('Masukkan jumlah ' + namaBuah[i]))
                            if(qtyBuah[i]>stokBuah[i]){
                                alert(`Maaf stok ${namaBuah[i]} hanya ${stokBuah[i]}`)
                                kondisi = true
                            }else if(!(qtyBuah[i]>0)) { // Proteksi jika user input string
                                alert('ERROR! Perhatikan input anda')
                                kondisi = true
                            }else{
                                stokBuah[i] -= qtyBuah[i]
                                kondisi = false
                            }                          
                        } while (kondisi);
                    }
                    var output = ''
                    var totalHarga = 0
                    for(i=0;i<namaBuah.length;i++){ // Loop hitung total harga
                        totalHarga += qtyBuah[i]*hrgBuah[i]
                        output += (`${namaBuah[i]}: ${qtyBuah[i]} kg x ${hrgBuah[i]} = ${(qtyBuah[i])*(hrgBuah[i])}\n`)
                    }
                    alert(output + '\nTotal : Rp ' + totalHarga)
                    
                    do { // Loop proteksi pembayaran
                        var payment = parseInt(prompt('Masukkan jumlah uang anda'))
                        if(payment < totalHarga){
                            alert('Maaf uang anda kurang sebesar Rp ' + (totalHarga-payment))
                            kondisi = true
                        }else if(payment > totalHarga){
                            alert('Terimakasih, kembalian anda sebesar Rp ' + (payment-totalHarga))
                            kondisi = false
                        }else if(payment == totalHarga){
                            alert('Terimakasih, uang anda pas')
                            kondisi = false
                        }else if(!(payment>0)){
                            alert('ERROR! Perhatikan input anda')
                            kondisi = true
                        }
                    } while (kondisi);
                    kondisiMenuUtama = confirm('Kembali ke menu utama?')
                }
            } while (kondisiMenuUtama); 
        }
    } while (kondisi);
    alert('Terima kasih, sampai jumpa kembali :)') //testes
</script> 